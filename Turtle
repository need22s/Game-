<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Turbo Turtle - AIGameLab</title>
    <style>
        body { margin: 0; overflow: hidden; background: #001a33; font-family: sans-serif; touch-action: none; }
        canvas { display: block; background: linear-gradient(#003366, #000510); }
        .ui { position: fixed; top: 20px; width: 100%; text-align: center; color: #00ffcc; font-size: 24px; font-weight: bold; pointer-events: none; text-shadow: 0 0 10px #00ffcc; }
        .back { position: fixed; bottom: 20px; left: 20px; color: #00ffcc; text-decoration: none; border: 1px solid #00ffcc; padding: 8px 15px; border-radius: 20px; z-index: 100; }
    </style>
</head>
<body>
    <div class="ui">SCORE: <span id="score">0</span></div>
    <a href="index.html" class="back">â¬… MENU</a>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let score = 0;
        let turtle = { x: 50, y: canvas.height/2, w: 50, h: 30, dy: 0 };
        let bubbles = [];
        let gravity = 0.25;
        let jump = -5;
        let gameActive = true;

        function createBubble() {
            if (Math.random() < 0.02) {
                bubbles.push({ x: canvas.width, y: Math.random() * canvas.height, r: 10 + Math.random() * 20 });
            }
        }

        function update() {
            if (!gameActive) return;
            
            turtle.dy += gravity;
            turtle.y += turtle.dy;

            if (turtle.y + turtle.h > canvas.height || turtle.y < 0) gameOver();

            bubbles.forEach((b, i) => {
                b.x -= 3;
                if (b.x + b.r < 0) {
                    bubbles.splice(i, 1);
                    score++;
                    document.getElementById('score').innerText = score;
                }
                // Collision
                let dx = turtle.x - b.x;
                let dy = turtle.y - b.y;
                if (Math.sqrt(dx*dx + dy*dy) < b.r + 20) gameOver();
            });

            createBubble();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw Turtle
            ctx.font = "40px Arial";
            ctx.fillText("ðŸ¢", turtle.x, turtle.y + 30);

            // Draw Bubbles
            ctx.fillStyle = "rgba(0, 255, 204, 0.3)";
            ctx.strokeStyle = "#00ffcc";
            bubbles.forEach(b => {
                ctx.beginPath();
                ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
            });
        }

        function gameOver() {
            gameActive = false;
            alert("Game Over! Score: " + score);
            location.reload();
        }

        window.addEventListener('mousedown', () => turtle.dy = jump);
        window.addEventListener('touchstart', (e) => { e.preventDefault(); turtle.dy = jump; });

        function loop() {
            update();
            draw();
            requestAnimationFrame(loop);
        }
        loop();
    </script>
</body>
</html>
